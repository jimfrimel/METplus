<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>METplus: produtil.fileop Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">METplus
   &#160;<span id="projectnumber">METplusV3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceprodutil.html">produtil</a></li><li class="navelem"><a class="el" href="namespaceprodutil_1_1fileop.html">fileop</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">produtil.fileop Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module provides a set of utility functions to do filesystem operations.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module provides a set of utility functions to do filesystem operations. </p>
<p>It replaces or improves upon several os, stat, and sys module functions by working around Python bugs, providing an API layer that allows forward compatibility to future Python versions, and adding logging capabilities. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1CannotFindExe.html">CannotFindExe</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrown when find_exe cannot find an executable in the path or directory list.  <a href="classprodutil_1_1fileop_1_1CannotFindExe.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1CannotLinkMulti.html">CannotLinkMulti</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception is raised when the caller tries to create multiple symlinks in a single target, but the target is not a directory.  <a href="classprodutil_1_1fileop_1_1CannotLinkMulti.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1DeliveryFailed.html">DeliveryFailed</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception is raised when a file cannot be delivered.  <a href="classprodutil_1_1fileop_1_1DeliveryFailed.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1FileOpError.html">FileOpError</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the superclass of several exceptions relating to multi-file operations in <a class="el" href="namespaceprodutil_1_1fileop.html" title="This module provides a set of utility functions to do filesystem operations. ">produtil.fileop</a>.  <a href="classprodutil_1_1fileop_1_1FileOpError.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1FileOpErrors.html">FileOpErrors</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception is raised when an operation that processes multiple files catches more than one exception.  <a href="classprodutil_1_1fileop_1_1FileOpErrors.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1FileWaiter.html">FileWaiter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class that waits for files to meet some requirements.  <a href="classprodutil_1_1fileop_1_1FileWaiter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1FindExeInvalidExeName.html">FindExeInvalidExeName</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrown when find_exe is given an executable name that contains a directory path.  <a href="classprodutil_1_1fileop_1_1FindExeInvalidExeName.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1InvalidExecutable.html">InvalidExecutable</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrown when a find_exe fails.  <a href="classprodutil_1_1fileop_1_1InvalidExecutable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1RelativePathError.html">RelativePathError</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raised when a relative path is given, but an absolute path is expected.  <a href="classprodutil_1_1fileop_1_1RelativePathError.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1UnexpectedAbsolutePath.html">UnexpectedAbsolutePath</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception indicates that the renamer function sent to make_symlinks_in returned an absolute path.  <a href="classprodutil_1_1fileop_1_1UnexpectedAbsolutePath.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1VerificationFailed.html">VerificationFailed</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception is raised when a copy of a file has different content than the original.  <a href="classprodutil_1_1fileop_1_1VerificationFailed.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1fileop_1_1WrongSymlink.html">WrongSymlink</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raised when os.symlink makes a symlink to a target other than the one that was requested.  <a href="classprodutil_1_1fileop_1_1WrongSymlink.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acbb763446440b42b162566b0821b8212"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#acbb763446440b42b162566b0821b8212">realcwd</a> ()</td></tr>
<tr class="memdesc:acbb763446440b42b162566b0821b8212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current working directory, expanding any symbolic links.  <a href="#acbb763446440b42b162566b0821b8212">More...</a><br /></td></tr>
<tr class="separator:acbb763446440b42b162566b0821b8212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b700e0da6a39676498832a268418628"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a5b700e0da6a39676498832a268418628">chdir</a> (path, logger=None)</td></tr>
<tr class="memdesc:a5b700e0da6a39676498832a268418628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes to the specified directory.  <a href="#a5b700e0da6a39676498832a268418628">More...</a><br /></td></tr>
<tr class="separator:a5b700e0da6a39676498832a268418628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade91f28b05a8489a0ee7a5d648f0c6b9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ade91f28b05a8489a0ee7a5d648f0c6b9">touch</a> (filename, times=None)</td></tr>
<tr class="memdesc:ade91f28b05a8489a0ee7a5d648f0c6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the file for append and set mtime and atime.  <a href="#ade91f28b05a8489a0ee7a5d648f0c6b9">More...</a><br /></td></tr>
<tr class="separator:ade91f28b05a8489a0ee7a5d648f0c6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fd8f9c1342cfe0a7f827cb6e6b16980"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a2fd8f9c1342cfe0a7f827cb6e6b16980">netcdfver</a> (filename)</td></tr>
<tr class="memdesc:a2fd8f9c1342cfe0a7f827cb6e6b16980"><td class="mdescLeft">&#160;</td><td class="mdescRight">What is the NetCDF version of this file?  <a href="#a2fd8f9c1342cfe0a7f827cb6e6b16980">More...</a><br /></td></tr>
<tr class="separator:a2fd8f9c1342cfe0a7f827cb6e6b16980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40f65aa984bb2e3fdf5a45803e4a51a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ab40f65aa984bb2e3fdf5a45803e4a51a">gribver</a> (filename)</td></tr>
<tr class="memdesc:ab40f65aa984bb2e3fdf5a45803e4a51a"><td class="mdescLeft">&#160;</td><td class="mdescRight">What is the GRIB version of this file?  <a href="#ab40f65aa984bb2e3fdf5a45803e4a51a">More...</a><br /></td></tr>
<tr class="separator:ab40f65aa984bb2e3fdf5a45803e4a51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b5e696cfbd8f4c4ed72c9d37f34e18"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a82b5e696cfbd8f4c4ed72c9d37f34e18">makedirs</a> (filename, numtries=10, logger=None)</td></tr>
<tr class="memdesc:a82b5e696cfbd8f4c4ed72c9d37f34e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a directory tree, working around filesystem bugs.  <a href="#a82b5e696cfbd8f4c4ed72c9d37f34e18">More...</a><br /></td></tr>
<tr class="separator:a82b5e696cfbd8f4c4ed72c9d37f34e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b3ccb99913d2bedcaabf98c58e6dd8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ad7b3ccb99913d2bedcaabf98c58e6dd8">remove_file</a> (filename, info=True, logger=None)</td></tr>
<tr class="memdesc:ad7b3ccb99913d2bedcaabf98c58e6dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the specified file.  <a href="#ad7b3ccb99913d2bedcaabf98c58e6dd8">More...</a><br /></td></tr>
<tr class="separator:ad7b3ccb99913d2bedcaabf98c58e6dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9939944f5ea130c4557a137206abcec6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a9939944f5ea130c4557a137206abcec6">rmall</a> (args, kwargs)</td></tr>
<tr class="memdesc:a9939944f5ea130c4557a137206abcec6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the specified list of files.  <a href="#a9939944f5ea130c4557a137206abcec6">More...</a><br /></td></tr>
<tr class="separator:a9939944f5ea130c4557a137206abcec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89943b625d848173605fa3b8578d9ed1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a89943b625d848173605fa3b8578d9ed1">lstat_stat</a> (filename, raise_nonexist=False)</td></tr>
<tr class="memdesc:a89943b625d848173605fa3b8578d9ed1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs lstat and stat on a file as efficiently as possible.  <a href="#a89943b625d848173605fa3b8578d9ed1">More...</a><br /></td></tr>
<tr class="separator:a89943b625d848173605fa3b8578d9ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306d0b77df75fde3f04e77c51c3b0abb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a306d0b77df75fde3f04e77c51c3b0abb">isnonempty</a> (filename)</td></tr>
<tr class="memdesc:a306d0b77df75fde3f04e77c51c3b0abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns True if the filename refers to an existent file that is non-empty, and False otherwise.  <a href="#a306d0b77df75fde3f04e77c51c3b0abb">More...</a><br /></td></tr>
<tr class="separator:a306d0b77df75fde3f04e77c51c3b0abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c8cfc6d9254517b452181daa7b594cb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a8c8cfc6d9254517b452181daa7b594cb">deliver_file</a> (infile, outfile, keep=True, verify=False, blocksize=1048576, tempprefix=None, permmask=0o002, removefailed=True, logger=None, preserve_perms=True, preserve_times=True, preserve_group=None, copy_acl=None, moveok=True, force=True, copier=None)</td></tr>
<tr class="memdesc:a8c8cfc6d9254517b452181daa7b594cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This moves or copies the file "infile" to "outfile" in a unit operation; outfile will never be seen in an incomplete state.  <a href="#a8c8cfc6d9254517b452181daa7b594cb">More...</a><br /></td></tr>
<tr class="separator:a8c8cfc6d9254517b452181daa7b594cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa520f12ba7897ddfa1ab2894de7ebd64"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#aa520f12ba7897ddfa1ab2894de7ebd64">find_exe</a> (name, dirlist=None, raise_missing=True)</td></tr>
<tr class="memdesc:aa520f12ba7897ddfa1ab2894de7ebd64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches the $PATH or a specified iterable of directory names to find an executable file with the given name.  <a href="#aa520f12ba7897ddfa1ab2894de7ebd64">More...</a><br /></td></tr>
<tr class="separator:aa520f12ba7897ddfa1ab2894de7ebd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fab248eba83d35a1c45ababa9dc3a23"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a5fab248eba83d35a1c45ababa9dc3a23">symlink_read_test</a> (filename, readsize=40, logger=None)</td></tr>
<tr class="memdesc:a5fab248eba83d35a1c45ababa9dc3a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the specified file for reading and attempts to read data to it.  <a href="#a5fab248eba83d35a1c45ababa9dc3a23">More...</a><br /></td></tr>
<tr class="separator:a5fab248eba83d35a1c45ababa9dc3a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac1bf31c05016a535219e6a96cf7740"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a4ac1bf31c05016a535219e6a96cf7740">make_symlinks_in</a> (sources, targetdir, force=False, renamer=None, logger=None, copy=False)</td></tr>
<tr class="memdesc:a4ac1bf31c05016a535219e6a96cf7740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates symbolic links from a set of source files to a target directory.  <a href="#a4ac1bf31c05016a535219e6a96cf7740">More...</a><br /></td></tr>
<tr class="separator:a4ac1bf31c05016a535219e6a96cf7740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56ac21b38401c2c8dc23191f13a58ae"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ac56ac21b38401c2c8dc23191f13a58ae">make_symlink</a> (source, target, force=False, logger=None, max_tries=20)</td></tr>
<tr class="memdesc:ac56ac21b38401c2c8dc23191f13a58ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a symbolic link "target" that points to "source".  <a href="#ac56ac21b38401c2c8dc23191f13a58ae">More...</a><br /></td></tr>
<tr class="separator:ac56ac21b38401c2c8dc23191f13a58ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb7573cdfc47dc6e628f464d7371b246"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#adb7573cdfc47dc6e628f464d7371b246">replace_symlink</a> (source, target, logger=None, max_tries=20)</td></tr>
<tr class="memdesc:adb7573cdfc47dc6e628f464d7371b246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not call this routine directly: you want make_symlink instead.  <a href="#adb7573cdfc47dc6e628f464d7371b246">More...</a><br /></td></tr>
<tr class="separator:adb7573cdfc47dc6e628f464d7371b246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d760bd1b5509d046f806001866466b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a69d760bd1b5509d046f806001866466b">unblock</a> (stream, logger=None)</td></tr>
<tr class="memdesc:a69d760bd1b5509d046f806001866466b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to modify the given stream to be non-blocking.  <a href="#a69d760bd1b5509d046f806001866466b">More...</a><br /></td></tr>
<tr class="separator:a69d760bd1b5509d046f806001866466b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e01f7ab110986c9c031a54f48dbb626"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a7e01f7ab110986c9c031a54f48dbb626">call_fcntrl</a> (stream, on, off, logger=None)</td></tr>
<tr class="memdesc:a7e01f7ab110986c9c031a54f48dbb626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function that implements <a class="el" href="namespaceprodutil_1_1fileop.html#a69d760bd1b5509d046f806001866466b" title="Attempts to modify the given stream to be non-blocking. ">unblock()</a>  <a href="#a7e01f7ab110986c9c031a54f48dbb626">More...</a><br /></td></tr>
<tr class="separator:a7e01f7ab110986c9c031a54f48dbb626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29aad92d8a2f44c49b9358c3166a9d04"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a29aad92d8a2f44c49b9358c3166a9d04">fortlink</a> (forts, force=False, basedir=None, logger=None)</td></tr>
<tr class="memdesc:a29aad92d8a2f44c49b9358c3166a9d04"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a convenience routine that makes many symbolic links to fort.N files for various integers N using make_symlink.  <a href="#a29aad92d8a2f44c49b9358c3166a9d04">More...</a><br /></td></tr>
<tr class="separator:a29aad92d8a2f44c49b9358c3166a9d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50459c609937539cd23961fac5245770"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a50459c609937539cd23961fac5245770">fortcopy</a> (forts, basedir=None, logger=None, only_log_errors=False, kwargs)</td></tr>
<tr class="memdesc:a50459c609937539cd23961fac5245770"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience function for copying files to local fort.N files for various integers N using deliver_file(...,keep=True).  <a href="#a50459c609937539cd23961fac5245770">More...</a><br /></td></tr>
<tr class="separator:a50459c609937539cd23961fac5245770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3398b00c8d1f23691dafa4972070a2d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ab3398b00c8d1f23691dafa4972070a2d">norm_expand_path</a> (path=None, fullnorm=False)</td></tr>
<tr class="memdesc:ab3398b00c8d1f23691dafa4972070a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalizes path and expand home directories.  <a href="#ab3398b00c8d1f23691dafa4972070a2d">More...</a><br /></td></tr>
<tr class="separator:ab3398b00c8d1f23691dafa4972070a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3633e9dc781dd59dc362fe65d915cd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a8a3633e9dc781dd59dc362fe65d915cd">norm_abs_path</a> (rel, fromdir=None)</td></tr>
<tr class="memdesc:a8a3633e9dc781dd59dc362fe65d915cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return relative path.  <a href="#a8a3633e9dc781dd59dc362fe65d915cd">More...</a><br /></td></tr>
<tr class="separator:a8a3633e9dc781dd59dc362fe65d915cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c2c05b48921c3397b98c51e8ae71238"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a1c2c05b48921c3397b98c51e8ae71238">check_last_lines</a> (filename, searchstr, lastbytes=10000, logger=None)</td></tr>
<tr class="memdesc:a1c2c05b48921c3397b98c51e8ae71238"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the last few bytes of a file to see if the specified search string is present.  <a href="#a1c2c05b48921c3397b98c51e8ae71238">More...</a><br /></td></tr>
<tr class="separator:a1c2c05b48921c3397b98c51e8ae71238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72fa381de5b4edd17522d539593385b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#ab72fa381de5b4edd17522d539593385b">check_file</a> (filename, min_size=None, min_mtime_age=None, min_atime_age=None, min_ctime_age=None, logger=None)</td></tr>
<tr class="memdesc:ab72fa381de5b4edd17522d539593385b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the specified file exists, and meets additional requirements.  <a href="#ab72fa381de5b4edd17522d539593385b">More...</a><br /></td></tr>
<tr class="separator:ab72fa381de5b4edd17522d539593385b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de5b479cd788eaa151fc79c52f76a54"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html#a3de5b479cd788eaa151fc79c52f76a54">wait_for_files</a> (flist, logger=None, maxwait=1800, sleeptime=20, min_size=1, min_mtime_age=30, min_atime_age=None, min_ctime_age=None, min_fraction=1.0, log_each_file=True)</td></tr>
<tr class="memdesc:a3de5b479cd788eaa151fc79c52f76a54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for files to meet requirements.  <a href="#a3de5b479cd788eaa151fc79c52f76a54">More...</a><br /></td></tr>
<tr class="separator:a3de5b479cd788eaa151fc79c52f76a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9a652f3060e5c6e457c8f34674d2bd4c"><td class="memItemLeft" align="right" valign="top"><a id="a9a652f3060e5c6e457c8f34674d2bd4c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>module_logger</b> = logging.getLogger('produtil.fileop')</td></tr>
<tr class="separator:a9a652f3060e5c6e457c8f34674d2bd4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7e01f7ab110986c9c031a54f48dbb626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e01f7ab110986c9c031a54f48dbb626">&#9670;&nbsp;</a></span>call_fcntrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.call_fcntrl </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal function that implements <a class="el" href="namespaceprodutil_1_1fileop.html#a69d760bd1b5509d046f806001866466b" title="Attempts to modify the given stream to be non-blocking. ">unblock()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>the stream to modify </td></tr>
    <tr><td class="paramname">on</td><td>flags to turn on </td></tr>
    <tr><td class="paramname">off</td><td>flags to turn off </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for messages </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00751">751</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00736">produtil.fileop.unblock()</a>.</p>

</div>
</div>
<a id="a5b700e0da6a39676498832a268418628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b700e0da6a39676498832a268418628">&#9670;&nbsp;</a></span>chdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.chdir </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes to the specified directory. </p>
<p>Please use produtil.cd.NamedDir instead.</p>
<p>This is generally not a good idea since you will not cd back if an unhandled exception is raised. It is better to use the produtil.cd module, which provides ways to enter a directory in a "with" block and optionally delete it afterwards. Such functionality could also be implemented via a try...finally block. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path to cd to </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for log messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00144">144</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="ab72fa381de5b4edd17522d539593385b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72fa381de5b4edd17522d539593385b">&#9670;&nbsp;</a></span>check_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.check_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_size</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_mtime_age</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_atime_age</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_ctime_age</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the specified file exists, and meets additional requirements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to analyze. </td></tr>
    <tr><td class="paramname">min_size</td><td>If present, the file must be at least this many bytes. </td></tr>
    <tr><td class="paramname">min_mtime_age</td><td>If specified, the file must have been modified more than this many seconds in the past. </td></tr>
    <tr><td class="paramname">min_atime_age</td><td>if specified, the file atime must be at least this many seconds old. The meaning of atime varies, but usually means the last access time. </td></tr>
    <tr><td class="paramname">min_ctime_age</td><td>If specified, the file ctime must be at least this many seconds old. The meaning of ctime varies between platforms and file types, but usually means the file creation or inode change time. See stat(2) for details. </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for log messages. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This routine can also be used on directories, but one should avoid the min_size option when doing that. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>True if requirements are met, False otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00929">929</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="datastore_8py_source.html#l00952">produtil.datastore.UpstreamFile.check()</a>, <a class="el" href="fileop_8py_source.html#l01039">produtil.fileop.FileWaiter.check()</a>, and <a class="el" href="fileop_8py_source.html#l00895">produtil.fileop.check_last_lines()</a>.</p>

</div>
</div>
<a id="a1c2c05b48921c3397b98c51e8ae71238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c2c05b48921c3397b98c51e8ae71238">&#9670;&nbsp;</a></span>check_last_lines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.check_last_lines </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>searchstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lastbytes</em> = <code>10000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the last few bytes of a file to see if the specified search string is present. </p>
<p>Returns True if the string is present or False if the file existed but the string was not present. Will raise an exception if the file is non-existent or cannot be read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to search (a string). </td></tr>
    <tr><td class="paramname">searchstr</td><td>The string to search for. Must not contain end-of-line chars. </td></tr>
    <tr><td class="paramname">lastbytes</td><td>The number of bytes at the end of the file to check. Can be larger than the file size. </td></tr>
    <tr><td class="paramname">logger</td><td>A logging.Logger for log messages. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the file contains the given string, False otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00895">895</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a8c8cfc6d9254517b452181daa7b594cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c8cfc6d9254517b452181daa7b594cb">&#9670;&nbsp;</a></span>deliver_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.deliver_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keep</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verify</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blocksize</em> = <code>1048576</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tempprefix</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>permmask</em> = <code>0o002</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>removefailed</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preserve_perms</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preserve_times</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preserve_group</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>copy_acl</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>moveok</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>force</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>copier</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This moves or copies the file "infile" to "outfile" in a unit operation; outfile will never be seen in an incomplete state. </p>
<p>If the caller specifies keep=False (default is True) and moveok=True, and the source and destination are on the same filesystem then the delivery is done with a simple move. Otherwise a copy is done to a temporary file on the same filesystem as the target. If verification is requested (verify=True) then the temporary file is verified by filecmp.cmp, before moving the temporary file to the final location.</p>
<p>When requested, and when possible, the permissions and ownership are preserved. Both copy_acl and preserve_group have defaults set by the <a class="el" href="namespaceprodutil_1_1cluster.html" title="Provides information about the cluster on which this job is running. ">produtil.cluster</a> module. If the cluster uses access control lists for data restriction classes, then copy_acl will be set to True, otherwise it is false. If group quotas are enabled, preserve_group is False, otherwise it is True.</p>
<dl class="section note"><dt>Note</dt><dd>The original file is never deleted, but it may be moved to the target if keep=False. If a copy is done instead, the original file is still present.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">infile</td><td>the origin file </td></tr>
    <tr><td class="paramname">outfile</td><td>the destination file or its parent directory </td></tr>
    <tr><td class="paramname">keep</td><td>If False, the original file is no longer needed. If False and moveok=True, the file might be delivered by a "mv" operation, avoiding any data duplication (no "cp"). </td></tr>
    <tr><td class="paramname">verify</td><td>If a "cp" is done, reopen the target and source and verify they are the same. Note that providing a copier will break the verification functionality if the copier changes the contents of the destination file (such as a copier that compresses). </td></tr>
    <tr><td class="paramname">blocksize</td><td>block size during copy operations </td></tr>
    <tr><td class="paramname">tempprefix</td><td>Prefix for temporary files during copy operations. Do not include directory paths in the tempprefix. </td></tr>
    <tr><td class="paramname">permmask</td><td>Permission bits to remove Default: world write (002) </td></tr>
    <tr><td class="paramname">removefailed</td><td>If True, delete temporary files if the delivery fails </td></tr>
    <tr><td class="paramname">logger</td><td>the logging.Logger for log messages. </td></tr>
    <tr><td class="paramname">preserve_perms</td><td>If True, copy the old file's permissions to the new file </td></tr>
    <tr><td class="paramname">preserve_times</td><td>If True, copy the old file's timestamps to the new file </td></tr>
    <tr><td class="paramname">preserve_group</td><td>If True, copy the old file's group ID to the new file </td></tr>
    <tr><td class="paramname">copy_acl</td><td>If True, copy the access control lists from one file to another </td></tr>
    <tr><td class="paramname">moveok</td><td>If True, delivery by "mv" is allowed. Must also set keep=False. </td></tr>
    <tr><td class="paramname">force</td><td>If False, delivery will be aborted (raise TargetFileExists) if the target file already exists. </td></tr>
    <tr><td class="paramname">copier</td><td>If present, this function or callable object is used to copy data from the source file to the temporary file before moving it to the target. The copier is called as copier(infile,temp_file_name,temp_file_object) Where the temp_file_name is the name of the destination file and the temp_file_object is an object that can be used to write to the file. The copier should NOT close the temp_file_object. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00348">348</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="datastore_8py_source.html#l00903">produtil.datastore.FileProduct.deliver()</a>, <a class="el" href="fileop_8py_source.html#l00815">produtil.fileop.fortcopy()</a>, <a class="el" href="fileop_8py_source.html#l00332">produtil.fileop.isnonempty()</a>, <a class="el" href="fileop_8py_source.html#l00609">produtil.fileop.make_symlinks_in()</a>, <a class="el" href="parsetree_8py_source.html#l01063">produtil.testing.parsetree.Copy.run()</a>, and <a class="el" href="parsetree_8py_source.html#l01235">produtil.testing.parsetree.BitCmp.run()</a>.</p>

</div>
</div>
<a id="aa520f12ba7897ddfa1ab2894de7ebd64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa520f12ba7897ddfa1ab2894de7ebd64">&#9670;&nbsp;</a></span>find_exe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.find_exe </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dirlist</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raise_missing</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches the $PATH or a specified iterable of directory names to find an executable file with the given name. </p>
<p>Returns the executable's location. If the executable cannot be found, and raise_missing=True, raises <a class="el" href="classprodutil_1_1fileop_1_1CannotFindExe.html" title="Thrown when find_exe cannot find an executable in the path or directory list. ">CannotFindExe</a>, otherwise returns None. Raises <a class="el" href="classprodutil_1_1fileop_1_1FindExeInvalidExeName.html" title="Thrown when find_exe is given an executable name that contains a directory path. ">FindExeInvalidExeName</a> if "name" is not the same as its os.path.basename.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the executable to find. </td></tr>
    <tr><td class="paramname">dirlist</td><td>The list of directories to search, or None to search $PATH </td></tr>
    <tr><td class="paramname">raise_missing</td><td>If True, the <a class="el" href="classprodutil_1_1fileop_1_1CannotFindExe.html" title="Thrown when find_exe cannot find an executable in the path or directory list. ">CannotFindExe</a> exception is raised for executables that cannot be found. If False, return None in that situation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00562">562</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="srun_8py_source.html#l00031">produtil.mpi_impl.srun.Implementation.detect()</a>, and <a class="el" href="mpi__impl__base_8py_source.html#l00096">produtil.mpi_impl.mpi_impl_base.ImplementationBase.synonyms()</a>.</p>

</div>
</div>
<a id="a50459c609937539cd23961fac5245770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50459c609937539cd23961fac5245770">&#9670;&nbsp;</a></span>fortcopy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.fortcopy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>forts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>basedir</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>only_log_errors</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience function for copying files to local fort.N files for various integers N using deliver_file(...,keep=True). </p>
<p>It works similarly to fortlink. The force= argument tells fortcopy to overwrite existing files. Otherwise, an exception will be raised if the destination file already exists. The optional basedir argument is the parent directory of the fort.N.</p>
<p>Call like this: </p><div class="fragment"><div class="line">fortcopy({ 15:<span class="stringliteral">&quot;/usr/local/share/file1&quot;</span>,</div><div class="line">           23:<span class="stringliteral">&quot;./file2&quot;</span>})</div></div><!-- fragment --><p>And you will create files: </p><div class="fragment"><div class="line">./fort.15 (copied from /usr/local/share/file1)</div><div class="line">./fort.23 (copied from ./file2)</div></div><!-- fragment --><p>All other keyword arguments are sent to deliver_file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forts</td><td>Mapping from Fortran unit number to copy target. </td></tr>
    <tr><td class="paramname">basedir</td><td>Where to put the files instead of the current directory. </td></tr>
    <tr><td class="paramname">logger</td><td>A logging.Logger for log messages. </td></tr>
    <tr><td class="paramname">only_log_errors</td><td>Only log failed operations instead of logging everything. </td></tr>
    <tr><td class="paramname">kwargs</td><td>All other keyword arguments are passed to <a class="el" href="namespaceprodutil_1_1fileop.html#a8c8cfc6d9254517b452181daa7b594cb" title="This moves or copies the file &quot;infile&quot; to &quot;outfile&quot; in a unit operation; outfile will never be seen i...">deliver_file()</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00815">815</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a29aad92d8a2f44c49b9358c3166a9d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29aad92d8a2f44c49b9358c3166a9d04">&#9670;&nbsp;</a></span>fortlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.fortlink </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>forts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>force</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>basedir</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a convenience routine that makes many symbolic links to fort.N files for various integers N using make_symlink. </p>
<p>It works similarly to fortcopy. The optional basedir is the relative directory. The optional force argument is passed on to make_symlink and has the usual meaning: replace existing files.</p>
<p>Call like this: </p><div class="fragment"><div class="line">fortlink({ 15:<span class="stringliteral">&quot;/usr/local/share/file1&quot;</span>,</div><div class="line">           23:<span class="stringliteral">&quot;./file2&quot;</span>})</div></div><!-- fragment --><p>And you will create these symbolic links: </p><div class="fragment"><div class="line">./fort.15 -&gt; /usr/local/share/file1</div><div class="line">./fort.23 -&gt; ./file2</div></div><!-- fragment --><p>as with other symlink routines in this module, set force=True to remove target fort.N files if they already exist. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forts</td><td>Mapping from Fortran unit number to link target. </td></tr>
    <tr><td class="paramname">force</td><td>Remove target files if they exist. </td></tr>
    <tr><td class="paramname">basedir</td><td>Where to make the links instead of the current directory. </td></tr>
    <tr><td class="paramname">logger</td><td>A logging.Logger for log messages. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00781">781</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="ab40f65aa984bb2e3fdf5a45803e4a51a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40f65aa984bb2e3fdf5a45803e4a51a">&#9670;&nbsp;</a></span>gribver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.gribver </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>What is the GRIB version of this file? </p>
<p>Returns the GRIB file version: 1 or 2. If the file is not a GRIB file, or if the answer is indeterminate, returns None. Only the first GRIB record is tested. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the path to the file to test </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00200">200</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a306d0b77df75fde3f04e77c51c3b0abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306d0b77df75fde3f04e77c51c3b0abb">&#9670;&nbsp;</a></span>isnonempty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.isnonempty </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns True if the filename refers to an existent file that is non-empty, and False otherwise. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to test. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00332">332</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="config_8py_source.html#l00621">produtil.config.ProdConfig.from_args()</a>, <a class="el" href="fileop_8py_source.html#l00200">produtil.fileop.gribver()</a>, and <a class="el" href="config__launcher_8py_source.html#l00097">config_launcher.parse_launch_args()</a>.</p>

</div>
</div>
<a id="a89943b625d848173605fa3b8578d9ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89943b625d848173605fa3b8578d9ed1">&#9670;&nbsp;</a></span>lstat_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.lstat_stat </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raise_nonexist</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs lstat and stat on a file as efficiently as possible. </p>
<p>Returns (lstat(filename),stat(filename)) where each is None if it fails due to non-existence. Does this in as few filesystem metadata operations as possible. Will raise an exception if the stat fails for any reason other than non-existence of a file, or if the file or linked file is non-existent and raise_nonexist=True. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to test. </td></tr>
    <tr><td class="paramname">raise_nonexist</td><td>Should we raise an exception if the file does not exist? </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a tuple (L,S) where L is the lstat return value, and S is the stat return value. Each will be None if the file or link target do not exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00306">306</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00348">produtil.fileop.deliver_file()</a>, <a class="el" href="fileop_8py_source.html#l00332">produtil.fileop.isnonempty()</a>, and <a class="el" href="fileop_8py_source.html#l00609">produtil.fileop.make_symlinks_in()</a>.</p>

</div>
</div>
<a id="ac56ac21b38401c2c8dc23191f13a58ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56ac21b38401c2c8dc23191f13a58ae">&#9670;&nbsp;</a></span>make_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.make_symlink </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>force</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_tries</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a symbolic link "target" that points to "source". </p>
<p>If the target already exists and is NOT a directory, then the file will be replaced. The replacement is done in a unit operation so that the target will always exist (unless the operation fails). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The file to link to. </td></tr>
    <tr><td class="paramname">target</td><td>The name of the link. </td></tr>
    <tr><td class="paramname">force</td><td>If True, and target exists, delete it first. </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for log messages. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00666">666</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00781">produtil.fileop.fortlink()</a>, <a class="el" href="fileop_8py_source.html#l00609">produtil.fileop.make_symlinks_in()</a>, and <a class="el" href="parsetree_8py_source.html#l01142">produtil.testing.parsetree.Link.run()</a>.</p>

</div>
</div>
<a id="a4ac1bf31c05016a535219e6a96cf7740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ac1bf31c05016a535219e6a96cf7740">&#9670;&nbsp;</a></span>make_symlinks_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.make_symlinks_in </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>targetdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>force</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>renamer</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>copy</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates symbolic links from a set of source files to a target directory. </p>
<p>If "force" is True, then any existing files will first be deleted.</p>
<p>The "renamer" can be a function that generates paths of the symlinks, relative to targetdir, for each symlink in "sources". If the return value from "renamer" is an absolute path, an exception will be thrown. If the return value is None, then no link will be made.</p>
<p>Example: make_symlinks_in(['/path/to/a','/path/to/b'],'.', renamer=lambda s: os.path.basename(s)+'.linkified')</p>
<p>will create a.linkified, linked to /path/to/a, and b.linkified, linked to /path/to/b in directory "." </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sources</td><td>The list of files to link to. </td></tr>
    <tr><td class="paramname">targetdir</td><td>The directory in which to place the links. </td></tr>
    <tr><td class="paramname">force</td><td>Remove existing files if needed. </td></tr>
    <tr><td class="paramname">renamer</td><td>Function to generate link names. </td></tr>
    <tr><td class="paramname">logger</td><td>A logging.Logger for log messages. </td></tr>
    <tr><td class="paramname">copy</td><td>If True, files are copied instead of linked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00609">609</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00593">produtil.fileop.symlink_read_test()</a>.</p>

</div>
</div>
<a id="a82b5e696cfbd8f4c4ed72c9d37f34e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b5e696cfbd8f4c4ed72c9d37f34e18">&#9670;&nbsp;</a></span>makedirs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.makedirs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>numtries</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a directory tree, working around filesystem bugs. </p>
<p>This makedirs implementation works around a common bug: if two processes try to recursively make a directory tree simultaneously, makedirs can fail when two processes make the same path component at the same time. This implementation automatically retries in that situation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the directory path </td></tr>
    <tr><td class="paramname">numtries</td><td>the number of times to retry </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for log messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00223">223</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="locking_8py_source.html#l00103">produtil.locking.LockFile.acquire_impl()</a>, <a class="el" href="rocoto_8py_source.html#l00658">produtil.testing.rocoto.RocotoRunner.make_runner()</a>, <a class="el" href="config_8py_source.html#l00994">produtil.config.ProdConfig.makedirs()</a>, and <a class="el" href="config__launcher_8py_source.html#l00097">config_launcher.parse_launch_args()</a>.</p>

</div>
</div>
<a id="a2fd8f9c1342cfe0a7f827cb6e6b16980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fd8f9c1342cfe0a7f827cb6e6b16980">&#9670;&nbsp;</a></span>netcdfver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.netcdfver </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>What is the NetCDF version of this file? </p>
<p>Returns one of three strings based on the NetCDF version of the given file, or returns None if the file is not NetCDF:</p><ul>
<li>"CDF1" = NetCDF classic format</li>
<li>"CDF2" = NetCDF 64-bit offset format</li>
<li>"HDF5" = HDF5 file, and hence possibly a NetCDF4 file.</li>
<li>None = Not NetCDF and not HDF5 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the name of the file to test </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00176">176</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a8a3633e9dc781dd59dc362fe65d915cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3633e9dc781dd59dc362fe65d915cd">&#9670;&nbsp;</a></span>norm_abs_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.norm_abs_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fromdir</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return relative path. </p>
<p>This routine generates relative file paths (using os.path.relpath) that are relative to the specified "from" directory fromdir. The fromdir will be first sent through norm_expand_path to eliminate system-specific weirdness, such as a/./b, a/../b, ~username and so on. This will raise <a class="el" href="classprodutil_1_1fileop_1_1RelativePathError.html" title="Raised when a relative path is given, but an absolute path is expected. ">RelativePathError</a> if the resulting path is not absolute. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rel</td><td>the path </td></tr>
    <tr><td class="paramname">fromdir</td><td>the directory from which we want the relative path </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00881">881</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="ab3398b00c8d1f23691dafa4972070a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3398b00c8d1f23691dafa4972070a2d">&#9670;&nbsp;</a></span>norm_expand_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.norm_expand_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fullnorm</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalizes path and expand home directories. </p>
<p>Calls os.path.normpath and os.path.expanduser on its argument, or on os.getcwd() if no argument is supplied (or if path=None). This removes extraneous a/./b, a/../b, expands ~username and ~, and other system-specific expansions. See the Python documentation of normpath and expanduser for details. Will also call realpath and normcase if fullnorm=True. Raises <a class="el" href="classprodutil_1_1fileop_1_1RelativePathError.html" title="Raised when a relative path is given, but an absolute path is expected. ">RelativePathError</a> if the resulting path is not absolute. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path to expand </td></tr>
    <tr><td class="paramname">fullnorm</td><td>If True, call os.path.normcase() and os.path.realpath() normapth and expanduser. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00857">857</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00881">produtil.fileop.norm_abs_path()</a>.</p>

</div>
</div>
<a id="acbb763446440b42b162566b0821b8212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb763446440b42b162566b0821b8212">&#9670;&nbsp;</a></span>realcwd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.realcwd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current working directory, expanding any symbolic links. </p>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00139">139</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="ad7b3ccb99913d2bedcaabf98c58e6dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b3ccb99913d2bedcaabf98c58e6dd8">&#9670;&nbsp;</a></span>remove_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.remove_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>info</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the specified file. </p>
<p>Does nothing if the filename is None, is the empty string or already does not exist. Otherwise, the file is deleted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to delete. </td></tr>
    <tr><td class="paramname">info</td><td>Optional: indicates that warnings about a file already not existing should be sent to the logger at INFO level (info=True) instead of WARNING (info=False). </td></tr>
    <tr><td class="paramname">logger</td><td>the logging.Logger for messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00250">250</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00275">produtil.fileop.rmall()</a>, and <a class="el" href="datastore_8py_source.html#l00891">produtil.datastore.FileProduct.undeliver()</a>.</p>

</div>
</div>
<a id="adb7573cdfc47dc6e628f464d7371b246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb7573cdfc47dc6e628f464d7371b246">&#9670;&nbsp;</a></span>replace_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.replace_symlink </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_tries</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do not call this routine directly: you want make_symlink instead. </p>
<p>This routine creates a new symbolic link and renames that link to "target." That always replaces target with a symbolic link to source, even if target did not already exist. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>the file to link from </td></tr>
    <tr><td class="paramname">target</td><td>the file to link to </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00700">700</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l00666">produtil.fileop.make_symlink()</a>.</p>

</div>
</div>
<a id="a9939944f5ea130c4557a137206abcec6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9939944f5ea130c4557a137206abcec6">&#9670;&nbsp;</a></span>rmall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.rmall </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the specified list of files. </p>
<p>Deletes files listed in "args". Each one is passed to remove_file. Exceptions that derive from EnvironmentError are collected, and will be raised at the end, thus allowing removal of later files to continue if earlier ones failed. If only one file causes an exception, that exception will be raised, otherwise <a class="el" href="classprodutil_1_1fileop_1_1FileOpErrors.html" title="This exception is raised when an operation that processes multiple files catches more than one except...">FileOpErrors</a> will be raised </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>The files to delete. </td></tr>
    <tr><td class="paramname">kwargs</td><td>Keyword arguments passed to <a class="el" href="namespaceprodutil_1_1fileop.html#ad7b3ccb99913d2bedcaabf98c58e6dd8" title="Deletes the specified file. ">remove_file()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00275">275</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a5fab248eba83d35a1c45ababa9dc3a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fab248eba83d35a1c45ababa9dc3a23">&#9670;&nbsp;</a></span>symlink_read_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.symlink_read_test </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readsize</em> = <code>40</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the specified file for reading and attempts to read data to it. </p>
<p>Logs the process. Will NOT raise any I/O or system errors; they are ignored. This is a workaround for a bug in Cray: symlinks to recently created files cannot be read by the compute node unless the batch node reads from them first (or unless you wait a while). </p>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00593">593</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="ade91f28b05a8489a0ee7a5d648f0c6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade91f28b05a8489a0ee7a5d648f0c6b9">&#9670;&nbsp;</a></span>touch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.touch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>times</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open the file for append and set mtime and atime. </p>
<p>Opens the specified file in append mode, but writes nothing. Sets the access and modification times.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the string filename </td></tr>
    <tr><td class="paramname">times</td><td>A 2-tuple of numbers, of the form (atime, mtime). These are UNIX epoch times (seconds since 1970 began in UTC). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00163">163</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a69d760bd1b5509d046f806001866466b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d760bd1b5509d046f806001866466b">&#9670;&nbsp;</a></span>unblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.unblock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to modify the given stream to be non-blocking. </p>
<p>This only works with streams that have an underlying POSIX fileno, such as those from open.</p>
<p>Will re-raise any exception received, other than AttributeError and EnvironmentError. Hence, I/O errors and attempts to make a non-fileno stream non-blocking will produce a False return value, while anything else will raise an exception.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>the stream to unblock </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for log messages </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l00736">736</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

</div>
</div>
<a id="a3de5b479cd788eaa151fc79c52f76a54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3de5b479cd788eaa151fc79c52f76a54">&#9670;&nbsp;</a></span>wait_for_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.fileop.wait_for_files </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maxwait</em> = <code>1800</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sleeptime</em> = <code>20</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_size</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_mtime_age</em> = <code>30</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_atime_age</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_ctime_age</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_fraction</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>log_each_file</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for files to meet requirements. </p>
<p>This is a simple wrapper around the <a class="el" href="classprodutil_1_1fileop_1_1FileWaiter.html" title="A class that waits for files to meet some requirements. ">FileWaiter</a> class for convenience. It is equivalent to creating a <a class="el" href="classprodutil_1_1fileop_1_1FileWaiter.html" title="A class that waits for files to meet some requirements. ">FileWaiter</a> with the provided arguments, and calling its checkfiles routine. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flist</td><td>the file or list of files to wait for. This is simply sent into self.add. </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger for messages </td></tr>
    <tr><td class="paramname">maxwait</td><td>maximum seconds to wait </td></tr>
    <tr><td class="paramname">sleeptime</td><td>sleep time in seconds between checks </td></tr>
    <tr><td class="paramname">min_size</td><td>minimum file size </td></tr>
    <tr><td class="paramname">min_mtime_age</td><td>minimum modification time age, </td></tr>
    <tr><td class="paramname">min_atime_age</td><td>minimum access time age. </td></tr>
    <tr><td class="paramname">min_ctime_age</td><td>time since last file status change (see stat(2)) </td></tr>
    <tr><td class="paramname">min_fraction</td><td>the minimum fraction of the provided files that must match the above requirements in order for FileWaiter.wait to return True. Default is 1.0, which means all of them. </td></tr>
    <tr><td class="paramname">log_each_file</td><td>log messages about each file checked </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileop_8py_source.html#l01136">1136</a> of file <a class="el" href="fileop_8py_source.html">fileop.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="fileop_8py_source.html#l01067">produtil.fileop.FileWaiter.checkfiles()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
