<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>METplus: produtil Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">METplus
   &#160;<span id="projectnumber">METplusV3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">produtil Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Platform-independent weather and ocean forecasting utility package.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Platform-independent weather and ocean forecasting utility package. </p>
<p><a class="anchor" id="produtil_overview"></a> The produtil package is a general production weather and ocean forecasting utility package. It implements a number of classes and functions needed to implement a reliable, cross-platform weather or ocean forecasting system. This package is entirely model-independent: nothing in it is specific to, or reliant on, the HWRF model.</p>
<p>Note that before you use anything in this module, you must first call the <a class="el" href="namespaceprodutil_1_1setup.html#a6050dc949ed6e01cb5b2d48366c6e4a9" title="Initializes the produtil package. ">produtil.setup.setup()</a> function, and that function should only be called once per process. Generally this is done at the top of the main program.</p>
<h1><a class="anchor" id="file_and_prod_manip"></a>
File and Product Manipulation</h1>
<p>There are a number of file and directory manipulation routines in the produtil package. In many cases, these replace Python standard library routines that either have known bugs or lack logging functionality. If a function exists in produtil and the Python standard library, it is best to use the produtil version to avoid Python's bugs.</p>
<ul>
<li><a class="el" href="namespaceprodutil_1_1fileop.html" title="This module provides a set of utility functions to do filesystem operations. ">produtil.fileop</a> &mdash; Many simple routines to manipulate files and directories. Works around many Python bugs and adds logging to file manipulation routines.</li>
<li>produtil.acl &mdash; A wrapper around libacl. This is used by the <a class="el" href="namespaceprodutil_1_1fileop.html#a8c8cfc6d9254517b452181daa7b594cb" title="This moves or copies the file &quot;infile&quot; to &quot;outfile&quot; in a unit operation; outfile will never be seen i...">produtil.fileop.deliver_file()</a> to copy access control lists (ACLs)</li>
<li>produtil.cd &mdash; Two classes to implement safe cd-in-cd-out blocks using the Python "with" construct. Also implements temporary directories and deletion of pre-existing directories if requested.</li>
<li><a class="el" href="namespaceprodutil_1_1locking.html" title="Handles file locking using Python &quot;with&quot; blocks. ">produtil.locking</a> &mdash; File locking that works around Lustre, GPFS and Panasas bugs.</li>
<li><a class="el" href="namespaceprodutil_1_1retry.html" title="Contains retry_io() which automates retrying operations. ">produtil.retry</a> &mdash; Retry operations.</li>
<li>produtil.rstprod &mdash; Handle NOAA restricted data requirements.</li>
<li>produtil.dbn_alert &mdash; Trigger DBNet alerts.</li>
<li><a class="el" href="namespaceprodutil_1_1datastore.html" title="Stores products and tasks in an sqlite3 database file. ">produtil.datastore</a> &mdash; A database and product tracking.</li>
<li>produtil.atparse &mdash; A simple text preparser.</li>
</ul>
<h1><a class="anchor" id="prog_exec"></a>
Program Execution</h1>
<p>The produtil package has flexible, shell-like syntaxes for specifying program execution, including complex MPI execution with multiple executables. Most critically, this package works around a bug in Python's subprocess module, which forgets to close pipes after a fork() call, causing deadlocks in multi-stage pipelines. That bug renders Python's subprocess module worthless for complex pipelines. The <a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a> does not suffer from that problem.</p>
<ul>
<li><a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a> &mdash; shell-like syntax for running programs, including a cross-platform way of requesting MPI and OpenMP program execution.</li>
<li><a class="el" href="namespaceprodutil_1_1prog.html" title="Implements the produtil.run: provides the object tree for representing shell commands. ">produtil.prog</a>, <a class="el" href="namespaceprodutil_1_1mpiprog.html" title="Object structure for describing MPI programs. ">produtil.mpiprog</a> &mdash; Object tree that underlies the <a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a> implementation.</li>
<li><a class="el" href="namespaceprodutil_1_1mpi__impl.html" title="Converts a group of MPI ranks to a runnable command. ">produtil.mpi_impl</a> &mdash; Contains one module for each MPI implementation supported by produtil.</li>
<li><a class="el" href="namespaceprodutil_1_1pipeline.html" title="Internal module that launches and monitors processes. ">produtil.pipeline</a> &mdash; Launches and monitors processes for <a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a>.</li>
</ul>
<p>You should never need to access the <a class="el" href="namespaceprodutil_1_1mpi__impl.html" title="Converts a group of MPI ranks to a runnable command. ">mpi_impl</a> or pipeline modules directly, and you should only need the prog and mpiprog modules for type checking. (For example, is my argument a <a class="el" href="classprodutil_1_1prog_1_1ImmutableRunner.html" title="An copy-on-write version of Runner. ">produtil.prog.ImmutableRunner</a>?) In nearly all cases, you can use the <a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a> functions to access the full functionality of all of the program execution modules.</p>
<h1><a class="anchor" id="other_utils"></a>
Other Utilities</h1>
<ul>
<li><a class="el" href="namespaceprodutil_1_1setup.html" title="Contains setup(), which initializes the produtil package. ">produtil.setup</a> &mdash; Contains the <a class="el" href="namespaceprodutil_1_1setup.html#a6050dc949ed6e01cb5b2d48366c6e4a9" title="Initializes the produtil package. ">produtil.setup.setup()</a> function, which initializes the entire produtil package.</li>
<li><a class="el" href="namespaceprodutil_1_1log.html" title="Configures logging. ">produtil.log</a> &mdash; Initialization of the logging module. Sets up logging to match what is required in the NCEP production environment. This is highly configurable (as is the Python logging module).</li>
<li><a class="el" href="namespaceprodutil_1_1sigsafety.html" title="Sets up signal handlers to ensure a clean exit. ">produtil.sigsafety</a> &mdash; raises an exception on fatal signals, instead of causing an immediate uncontrolled exit. This is connected to the <a class="el" href="namespaceprodutil_1_1locking.html" title="Handles file locking using Python &quot;with&quot; blocks. ">produtil.locking</a> module to work around bugs in Lustre, Panasas and GPFS file locking.</li>
<li>produtil.rusage &mdash; monitor and limit process resource usage</li>
<li><a class="el" href="namespaceprodutil_1_1batchsystem.html" title="Provides information about the batch system. ">produtil.batchsystem</a> &mdash; Query information about the batch system and current batch job.</li>
<li><a class="el" href="namespaceprodutil_1_1cluster.html" title="Provides information about the cluster on which this job is running. ">produtil.cluster</a> &mdash; Query information about the cluster. </li>
</ul>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceprodutil_1_1batchsystem"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1batchsystem.html">batchsystem</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1batchsystem"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides information about the batch system. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1cluster"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1cluster.html">cluster</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1cluster"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides information about the cluster on which this job is running. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1config"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1config.html">config</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1config"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses UNIX conf files and makes the result readily available. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1datastore"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1datastore.html">datastore</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1datastore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores products and tasks in an sqlite3 database file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1dbnalert"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1dbnalert.html">dbnalert</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1dbnalert"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module runs the NCO dbn_alert program, or logs dbn_alert messages if run with dbn alerts disabled. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1fileop"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1fileop.html">fileop</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1fileop"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module provides a set of utility functions to do filesystem operations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1locking"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1locking.html">locking</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1locking"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles file locking using Python "with" blocks. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1log"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1log.html">log</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1log"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures logging. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1mpi__impl"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1mpi__impl.html">mpi_impl</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1mpi__impl"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a group of MPI ranks to a runnable command. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1mpiprog"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1mpiprog.html">mpiprog</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1mpiprog"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object structure for describing MPI programs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1numerics"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1numerics.html">numerics</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1numerics"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time manipulation and other numerical routines. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1pipeline"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1pipeline.html">pipeline</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1pipeline"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal module that launches and monitors processes. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1prog"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1prog.html">prog</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1prog"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the <a class="el" href="namespaceprodutil_1_1run.html" title="A shell-like syntax for running serial, MPI and OpenMP programs. ">produtil.run</a>: provides the object tree for representing shell commands. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1retry"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1retry.html">retry</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1retry"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains <a class="el" href="namespaceprodutil_1_1retry.html#afad1de48bf032cd79ea659bafcd1e5de" title="This function automates retrying an unreliable operation several times until it succeeds. ">retry_io()</a> which automates retrying operations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1run"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1run.html">run</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1run"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shell-like syntax for running serial, MPI and OpenMP programs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1setup"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1setup.html">setup</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1setup"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains <a class="el" href="namespaceprodutil_1_1setup.html#a6050dc949ed6e01cb5b2d48366c6e4a9" title="Initializes the produtil package. ">setup()</a>, which initializes the produtil package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1sigsafety"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1sigsafety.html">sigsafety</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1sigsafety"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up signal handlers to ensure a clean exit. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceprodutil_1_1testing"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceprodutil_1_1testing.html">testing</a></td></tr>
<tr class="memdesc:namespaceprodutil_1_1testing"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test suite automation utilities. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a453ba94d3b522fd1a80e41dbd79d5987"><td class="memItemLeft" align="right" valign="top"><a id="a453ba94d3b522fd1a80e41dbd79d5987"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>version</b> = '4.1'</td></tr>
<tr class="separator:a453ba94d3b522fd1a80e41dbd79d5987"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
