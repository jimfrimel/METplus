<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>METplus: produtil.datastore.Datastore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">METplus
   &#160;<span id="projectnumber">METplusV3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceprodutil.html">produtil</a></li><li class="navelem"><a class="el" href="namespaceprodutil_1_1datastore.html">datastore</a></li><li class="navelem"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html">Datastore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classprodutil_1_1datastore_1_1Datastore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">produtil.datastore.Datastore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Stores information about <a class="el" href="classprodutil_1_1datastore_1_1Datum.html" title="Superclass of anything that can be stored in a Datastore. ">Datum</a> objects in a database.  
 <a href="classprodutil_1_1datastore_1_1Datastore.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Stores information about <a class="el" href="classprodutil_1_1datastore_1_1Datum.html" title="Superclass of anything that can be stored in a Datastore. ">Datum</a> objects in a database. </p>
<p>Stores and retrieves <a class="el" href="classprodutil_1_1datastore_1_1Datum.html" title="Superclass of anything that can be stored in a Datastore. ">Datum</a> objects from an sqlite3 database. Uses file locking workarounds for bugs in RedHat Enterprise Linux's sqlite3 library, which is compiled without proper locking. Has support for caching, and multithreading. Each object in this database has a type, a string location, an integer "available" parameter, and an arbitrary list of (key,value) metadata pairs. This object can safely be accessed by multiple threads in the local process, and handles concurrency between processes via file locking. </p>

<p class="definition">Definition at line <a class="el" href="datastore_8py_source.html#l00134">134</a> of file <a class="el" href="datastore_8py_source.html">datastore.py</a>.</p>
</div><div class="dynheader">
Inheritance diagram for produtil.datastore.Datastore:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classprodutil_1_1datastore_1_1Datastore.png" usemap="#produtil.datastore.Datastore_map" alt=""/>
  <map id="produtil.datastore.Datastore_map" name="produtil.datastore.Datastore_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6dca4ddc0749ea8f3fc2f75f9c31f558"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#a6dca4ddc0749ea8f3fc2f75f9c31f558">__init__</a> (self, <a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#a31abff8536554ccb8a0d64e73249ad2a">filename</a>, logger=None, locking=True)</td></tr>
<tr class="memdesc:a6dca4ddc0749ea8f3fc2f75f9c31f558"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html" title="Stores information about Datum objects in a database. ">Datastore</a> constructor.  <a href="#a6dca4ddc0749ea8f3fc2f75f9c31f558">More...</a><br /></td></tr>
<tr class="separator:a6dca4ddc0749ea8f3fc2f75f9c31f558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae45bc7e195d292410732b6643242d22"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#aae45bc7e195d292410732b6643242d22">transaction</a> (self)</td></tr>
<tr class="memdesc:aae45bc7e195d292410732b6643242d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a transaction on the database in the current thread.  <a href="#aae45bc7e195d292410732b6643242d22">More...</a><br /></td></tr>
<tr class="separator:aae45bc7e195d292410732b6643242d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e8bce42cd4ae4af6363d0fde450633"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#a93e8bce42cd4ae4af6363d0fde450633">dump</a> (self)</td></tr>
<tr class="memdesc:a93e8bce42cd4ae4af6363d0fde450633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print database contents to the terminal.  <a href="#a93e8bce42cd4ae4af6363d0fde450633">More...</a><br /></td></tr>
<tr class="separator:a93e8bce42cd4ae4af6363d0fde450633"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a31abff8536554ccb8a0d64e73249ad2a"><td class="memItemLeft" align="right" valign="top"><a id="a31abff8536554ccb8a0d64e73249ad2a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#a31abff8536554ccb8a0d64e73249ad2a">filename</a></td></tr>
<tr class="memdesc:a31abff8536554ccb8a0d64e73249ad2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The path to the sqlite3 database file. <br /></td></tr>
<tr class="separator:a31abff8536554ccb8a0d64e73249ad2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5728181e89ea3df84f013669892a30fd"><td class="memItemLeft" align="right" valign="top"><a id="a5728181e89ea3df84f013669892a30fd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html#a5728181e89ea3df84f013669892a30fd">db</a></td></tr>
<tr class="memdesc:a5728181e89ea3df84f013669892a30fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The underlying sqlite3 database object. <br /></td></tr>
<tr class="separator:a5728181e89ea3df84f013669892a30fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6dca4ddc0749ea8f3fc2f75f9c31f558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dca4ddc0749ea8f3fc2f75f9c31f558">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.datastore.Datastore.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>locking</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classprodutil_1_1datastore_1_1Datastore.html" title="Stores information about Datum objects in a database. ">Datastore</a> constructor. </p>
<p>Creates a <a class="el" href="classprodutil_1_1datastore_1_1Datastore.html" title="Stores information about Datum objects in a database. ">Datastore</a> for the specified sqlite3 file. Uses the given logging.Logger object for logging messages. Set locking=False to disable all file locking. That is generally unwise, and should only be used when reading the database. That functionality is supplied, and critical, for monitoring another user's jobs. One cannot lock another user's file, so the "no locking" option is the only way to analyze the other user's simulation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the filename passed to sqlite3.connect </td></tr>
    <tr><td class="paramname">logger</td><td>a logging.Logger to use for logging messages </td></tr>
    <tr><td class="paramname">locking</td><td>should file locking be used? It is unwise to turn off file locking. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Setting locking=False will disable file locking at both the <a class="el" href="classprodutil_1_1datastore_1_1Datastore.html" title="Stores information about Datum objects in a database. ">Datastore</a> level, and within sqlite3 itself. This can lead to database corruption if two processes try to write at the same time. This functionality is provided for the rare situation where you are unable to write to a database, such as when reading other users' sqlite3 database files. </dd></dl>

<p class="definition">Definition at line <a class="el" href="datastore_8py_source.html#l00146">146</a> of file <a class="el" href="datastore_8py_source.html">datastore.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a93e8bce42cd4ae4af6363d0fde450633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e8bce42cd4ae4af6363d0fde450633">&#9670;&nbsp;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.datastore.Datastore.dump </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print database contents to the terminal. </p>
<p>This function is only meant for debugging. It dumps to the terminal an arguably human-readable display of the complete database state via the print command. </p>

<p class="definition">Definition at line <a class="el" href="datastore_8py_source.html#l00241">241</a> of file <a class="el" href="datastore_8py_source.html">datastore.py</a>.</p>

</div>
</div>
<a id="aae45bc7e195d292410732b6643242d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae45bc7e195d292410732b6643242d22">&#9670;&nbsp;</a></span>transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def produtil.datastore.Datastore.transaction </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a transaction on the database in the current thread. </p>

<p class="definition">Definition at line <a class="el" href="datastore_8py_source.html#l00225">225</a> of file <a class="el" href="datastore_8py_source.html">datastore.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="datastore_8py_source.html#l00681">produtil.datastore.Datum.__delitem__()</a>, <a class="el" href="datastore_8py_source.html#l00673">produtil.datastore.Datum.__setitem__()</a>, <a class="el" href="datastore_8py_source.html#l00241">produtil.datastore.Datastore.dump()</a>, and <a class="el" href="datastore_8py_source.html#l00607">produtil.datastore.Datum.set_loc_avail()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/mccabe/metplus-doc/METplus/ush/produtil/<a class="el" href="datastore_8py_source.html">datastore.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
